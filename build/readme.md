# build

Различные файлы для сборки стилей через GH Actions

## Файлы

`schemes.json` содержит информацию о иерархии схем и их переменных.
`build.py` собирает стили, опираясь на информацию из `schemes.json` и вставляет собранные схемы в `ťemplate.css`
~~`optimizer.py` перебирает схемы и выбрасывает излишние переменные (запускается вручную)~~ _пока лучше не трогать_

## Структура схемы

Схема - объект в корне `schemes.json`. Ключ схемы, естественно, должен быть уникален и должен быть валидным именем файла.
Ключи, которые должны быть в каждой схеме:

-   `name`: Имя схемы.
-   `parent`: Ключ схемы-родителя. Цепочка родителей всегда должна приводить к схеме `default`
-   `variables`: Объект с переменными схемы (см. ниже)

### Переменные

Для упрощения создания, схемы опираются друг на друга и наследуют переменные.  
Также, во избежание многочисленных повторений и улучшения читабельности используются две дополнительных конструкции:  
`@name` - использует значение переменной name из этой же схемы (после того, как это значение будет определено)  
`$name` - конвертируется в `var(--name)`

Дополнительно доступна конкатенация (пока довольно ограниченная), например:
`@name:99` - соединяет значение переменной name и "99".  
Пока доступно только в формате `@x:y`, где x - имя переменной (см. выше) и y - произвольный текст.
